{% extends 'base.html' %} {% block content %}
<div class="container mx-auto px-4 py-8">
  <h1 class="text-3xl font-bold text-gray-800">Liturgy Parser</h1>

  <div class="bg-white shadow-md rounded-lg p-4">
    <form method="post" class="space-y-4" action="{% url 'liturgy_upload' %}">
      {% csrf_token %}
      <textarea
        id="liturgy-text-area"
        name="liturgy_text"
        rows="5"
        class="w-full border border-gray-300 rounded p-2"
        placeholder="Enter your liturgy text here..."
        oninput="autoExpand(this)"
      ></textarea>
      <button
        type="submit"
        class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700"
      >
        Parse Liturgy
      </button>
    </form>
  </div>
</div>

<script>
  function autoExpand(textarea) {
    // Reset the height to allow for shrinking
    textarea.style.height = "auto";

    // Set the height to the scroll height, but limit it to a maximum of 10 rows
    const maxRows = 10;
    const lineHeight = parseInt(window.getComputedStyle(textarea).lineHeight);
    const newHeight = Math.min(textarea.scrollHeight, maxRows * lineHeight);
    textarea.style.height = newHeight + "px";
  }
</script>
{% endblock %}
